<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product OS MCP — SynergyOS.ai | The Open Source AI Operating System for Product Teams</title>
  <meta name="description" content="Work in synergy with AI. Product OS MCP gives your AI assistant real-time access to your product knowledge — glossary, rules, decisions, strategy. Free and open source, or hosted on SynergyOS.ai Cloud.">
  <meta property="og:title" content="Product OS MCP — Work in Synergy with AI">
  <meta property="og:description" content="The open source AI operating system for product teams. Your product knowledge, alive in your editor. Free forever or start on SynergyOS.ai Cloud.">
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="SynergyOS.ai">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}

    :root {
      --bg: #09090b;
      --bg-subtle: #111113;
      --bg-card: #18181b;
      --border: #27272a;
      --border-hover: #3f3f46;
      --text: #fafafa;
      --text-muted: #a1a1aa;
      --text-dim: #71717a;
      --accent: #818cf8;
      --accent-bright: #a5b4fc;
      --accent-dim: #4f46e5;
      --green: #34d399;
      --red: #f87171;
      --orange: #fb923c;
      --radius: 12px;
      --radius-sm: 8px;
    }

    html {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      scroll-behavior: smooth;
      -webkit-font-smoothing: antialiased;
    }

    body {
      overflow-x: hidden;
    }

    /* ── Ambient glow ─────────────────────────────────────── */

    .glow {
      position: fixed;
      top: -30vh;
      left: 50%;
      transform: translateX(-50%);
      width: 80vw;
      height: 60vh;
      background: radial-gradient(ellipse at center, rgba(99,102,241,.12) 0%, transparent 70%);
      pointer-events: none;
      z-index: 0;
    }

    /* ── Layout ───────────────────────────────────────────── */

    .container {
      max-width: 1120px;
      margin: 0 auto;
      padding: 0 24px;
      position: relative;
      z-index: 1;
    }

    section {
      padding: 100px 0;
    }

    /* ── Nav ───────────────────────────────────────────────── */

    nav {
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(16px);
      background: rgba(9,9,11,.8);
      border-bottom: 1px solid var(--border);
      padding: 16px 0;
    }

    nav .container {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .nav-brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 1rem;
      text-decoration: none;
      color: var(--text);
    }

    .nav-brand .dot {
      width: 8px;
      height: 8px;
      background: var(--accent);
      border-radius: 50%;
      display: inline-block;
    }

    .nav-links {
      display: flex;
      gap: 32px;
      list-style: none;
    }

    .nav-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-size: .875rem;
      font-weight: 500;
      transition: color .15s;
    }

    .nav-links a:hover { color: var(--text); }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: var(--radius-sm);
      font-size: .875rem;
      font-weight: 600;
      text-decoration: none;
      transition: all .15s;
      cursor: pointer;
      border: none;
    }

    .btn-primary {
      background: var(--accent);
      color: #fff;
    }

    .btn-primary:hover {
      background: var(--accent-bright);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-muted);
      border: 1px solid var(--border);
    }

    .btn-ghost:hover {
      color: var(--text);
      border-color: var(--border-hover);
      background: var(--bg-subtle);
    }

    /* ── Hero ──────────────────────────────────────────────── */

    .hero {
      padding: 120px 0 80px;
      text-align: center;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 14px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--bg-subtle);
      font-size: .8rem;
      color: var(--text-muted);
      margin-bottom: 32px;
    }

    .hero-badge .pulse {
      width: 6px;
      height: 6px;
      background: var(--green);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: .5; transform: scale(1.5); }
    }

    .hero h1 {
      font-size: clamp(2.5rem, 6vw, 4.5rem);
      font-weight: 800;
      line-height: 1.1;
      letter-spacing: -0.03em;
      max-width: 800px;
      margin: 0 auto 24px;
    }

    .hero h1 .gradient {
      background: linear-gradient(135deg, var(--accent-bright), #c084fc, var(--orange));
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .hero p {
      font-size: clamp(1.05rem, 2vw, 1.2rem);
      color: var(--text-muted);
      max-width: 620px;
      margin: 0 auto 16px;
      line-height: 1.7;
    }

    .hero p:last-of-type {
      margin-bottom: 40px;
    }

    .hero p.hero-lead {
      font-size: clamp(1.1rem, 2.2vw, 1.3rem);
      color: var(--text);
      max-width: 640px;
      margin-bottom: 12px;
    }

    .hero p.hero-lead strong {
      color: var(--red);
    }

    .hero-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* ── Problem Section ──────────────────────────────────── */

    .problem {
      text-align: center;
    }

    .problem-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-top: 48px;
    }

    .problem-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 32px;
      text-align: left;
      transition: border-color .2s;
    }

    .problem-card:hover {
      border-color: var(--border-hover);
    }

    .problem-card .icon {
      font-size: 1.5rem;
      margin-bottom: 16px;
      display: block;
    }

    .problem-card h3 {
      font-size: 1.05rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .problem-card p {
      color: var(--text-muted);
      font-size: .9rem;
      line-height: 1.6;
    }

    .section-label {
      display: inline-block;
      font-size: .75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .1em;
      color: var(--accent);
      margin-bottom: 12px;
    }

    .section-title {
      font-size: clamp(1.75rem, 4vw, 2.5rem);
      font-weight: 800;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }

    .section-sub {
      color: var(--text-muted);
      font-size: 1.05rem;
      max-width: 600px;
      margin: 12px auto 0;
      line-height: 1.7;
    }

    /* ── How It Works — Animated Flow ─────────────────────── */

    .architecture { text-align: center; }

    .flow-container {
      margin: 56px auto 0;
      max-width: 640px;
      position: relative;
    }

    .flow-step {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px 24px;
      display: flex;
      align-items: flex-start;
      gap: 16px;
      text-align: left;
      transition: border-color .4s ease, box-shadow .4s ease, opacity .5s ease, transform .5s ease;
      opacity: 0.3;
      transform: translateY(6px);
    }

    .flow-step.ready {
      opacity: 0.5;
      transform: translateY(0);
    }

    .flow-step.active {
      opacity: 1;
      transform: translateY(0);
      border-color: var(--accent-dim);
      box-shadow: 0 0 30px rgba(99,102,241,.08), 0 0 0 1px rgba(99,102,241,.1);
    }

    .flow-step.done {
      opacity: 1;
      transform: translateY(0);
      border-color: rgba(52,211,153,.25);
    }

    .flow-step-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.15rem;
      flex-shrink: 0;
      background: rgba(99,102,241,.08);
      border: 1px solid rgba(99,102,241,.15);
      transition: background .4s ease, border-color .4s ease;
    }

    .flow-step.active .flow-step-icon {
      background: rgba(99,102,241,.15);
      border-color: rgba(99,102,241,.35);
    }

    .flow-step.done .flow-step-icon {
      background: rgba(52,211,153,.08);
      border-color: rgba(52,211,153,.25);
    }

    .flow-step-body { flex: 1; min-width: 0; }

    .flow-step-title {
      font-size: .95rem;
      font-weight: 600;
      color: var(--text);
      margin-bottom: 2px;
    }

    .flow-step-desc {
      font-size: .82rem;
      color: var(--text-dim);
      line-height: 1.5;
    }

    .flow-step-activity {
      margin-top: 0;
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      font-size: .78rem;
      line-height: 1.7;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height .5s ease, opacity .4s ease, margin-top .4s ease;
    }

    .flow-step.active .flow-step-activity,
    .flow-step.done .flow-step-activity {
      max-height: 300px;
      opacity: 1;
      margin-top: 12px;
    }

    .flow-act {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 3px 0;
      opacity: 0;
      transform: translateX(-8px);
      transition: opacity .3s ease, transform .3s ease;
    }

    .flow-act.show { opacity: 1; transform: translateX(0); }

    .flow-act-cmd { color: var(--accent-bright); font-weight: 500; }
    .flow-act-val { color: var(--text-muted); }
    .flow-act-ok { color: var(--green); font-weight: 600; }

    .flow-act-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: .72rem;
      font-weight: 600;
      background: rgba(52,211,153,.1);
      color: var(--green);
    }

    .flow-act-badge-text { color: var(--text-muted); font-weight: 400; }

    .flow-connector {
      display: flex;
      align-items: center;
      justify-content: center;
      height: 48px;
      position: relative;
    }

    .flow-connector-track {
      width: 2px;
      height: 100%;
      background: var(--border);
      border-radius: 1px;
      position: relative;
      overflow: hidden;
    }

    .flow-connector-track::after {
      content: '';
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: linear-gradient(180deg, var(--accent-bright), var(--accent-dim));
      transform: scaleY(0);
      transform-origin: top;
      transition: transform .5s ease;
    }

    .flow-connector.lit .flow-connector-track::after { transform: scaleY(1); }
    .flow-connector.lit .flow-connector-track { background: var(--accent-dim); }

    .flow-connector-label {
      position: absolute;
      left: calc(50% + 16px);
      font-size: .72rem;
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      color: var(--text-dim);
      white-space: nowrap;
      opacity: 0;
      transform: translateX(-6px);
      transition: opacity .4s ease, transform .4s ease;
    }

    .flow-connector.lit .flow-connector-label {
      opacity: 1;
      transform: translateX(0);
      color: var(--accent);
    }

    .flow-response {
      background: rgba(52,211,153,.04);
      border: 1px solid rgba(52,211,153,.15);
      border-radius: var(--radius);
      padding: 20px 24px;
      text-align: left;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity .5s ease, transform .5s ease;
    }

    .flow-response.show { opacity: 1; transform: translateY(0); }

    .flow-response-title {
      font-size: .72rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .06em;
      color: var(--green);
      margin-bottom: 8px;
    }

    .flow-response-body {
      font-size: .85rem;
      color: var(--text-muted);
      line-height: 1.7;
    }

    .flow-response-body .hi { color: var(--green); font-weight: 500; }
    .flow-response-body .ref { color: var(--accent-bright); font-weight: 600; }

    .flow-replay-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      margin-top: 28px;
      padding: 8px 18px;
      border-radius: var(--radius-sm);
      font-size: .82rem;
      color: var(--text-dim);
      background: transparent;
      border: 1px solid var(--border);
      cursor: pointer;
      font-family: inherit;
      opacity: 0;
      transition: opacity .4s ease, color .15s, border-color .15s, background .15s;
    }

    .flow-replay-btn.show { opacity: 1; }

    .flow-replay-btn:hover {
      color: var(--text);
      border-color: var(--border-hover);
      background: var(--bg-subtle);
    }

    .flow-replay-btn svg { transition: transform .3s ease; }
    .flow-replay-btn:hover svg { transform: rotate(-180deg); }

    .flow-typing-cursor {
      display: inline-block;
      width: 2px;
      height: 1em;
      background: var(--accent-bright);
      vertical-align: text-bottom;
      margin-left: 1px;
      animation: blink-cursor .8s steps(1) infinite;
    }

    @media (max-width: 640px) {
      .flow-container { margin-top: 40px; }
      .flow-step { padding: 16px 18px; gap: 12px; }
      .flow-step-icon { width: 36px; height: 36px; font-size: 1rem; }
      .flow-connector { height: 36px; }
      .flow-connector-label { display: none; }
      .flow-step-activity { font-size: .72rem; }
    }

    /* ── Feature grid ─────────────────────────────────────── */

    .features {
      text-align: center;
    }

    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 20px;
      margin-top: 48px;
    }

    .feature-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 28px;
      text-align: left;
      transition: border-color .2s, transform .2s;
    }

    .feature-card:hover {
      border-color: var(--border-hover);
      transform: translateY(-2px);
    }

    .feature-card .tag {
      display: inline-block;
      font-size: .7rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .08em;
      padding: 3px 8px;
      border-radius: 4px;
      margin-bottom: 12px;
    }

    .tag-read { background: rgba(129,140,248,.15); color: var(--accent-bright); }
    .tag-write { background: rgba(52,211,153,.15); color: var(--green); }
    .tag-verify { background: rgba(251,146,60,.15); color: var(--orange); }
    .tag-graph { background: rgba(192,132,252,.15); color: #c084fc; }

    .feature-card h3 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .feature-card code {
      font-family: 'SF Mono', 'Fira Code', monospace;
      font-size: .8rem;
      background: rgba(255,255,255,.06);
      padding: 2px 6px;
      border-radius: 4px;
      color: var(--accent-bright);
    }

    .feature-card p {
      color: var(--text-muted);
      font-size: .875rem;
      line-height: 1.6;
    }

    /* ── Drift section (the marketing angle) ──────────────── */

    .drift {
      text-align: center;
    }

    .drift-compare {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
      margin-top: 48px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
    }

    @media (max-width: 640px) {
      .drift-compare { grid-template-columns: 1fr; }
    }

    .drift-col {
      border-radius: var(--radius);
      padding: 32px;
      text-align: left;
    }

    .drift-col.old {
      background: rgba(248,113,113,.05);
      border: 1px solid rgba(248,113,113,.2);
    }

    .drift-col.new {
      background: rgba(52,211,153,.05);
      border: 1px solid rgba(52,211,153,.2);
    }

    .drift-col h3 {
      font-size: 1rem;
      font-weight: 700;
      margin-bottom: 16px;
    }

    .drift-col.old h3 { color: var(--red); }
    .drift-col.new h3 { color: var(--green); }

    .drift-col ul {
      list-style: none;
      padding: 0;
    }

    .drift-col li {
      font-size: .9rem;
      color: var(--text-muted);
      padding: 6px 0;
      padding-left: 20px;
      position: relative;
      line-height: 1.5;
    }

    .drift-col.old li::before {
      content: '\00d7';
      position: absolute;
      left: 0;
      color: var(--red);
      font-weight: 700;
    }

    .drift-col.new li::before {
      content: '\2713';
      position: absolute;
      left: 0;
      color: var(--green);
      font-weight: 700;
    }

    .drift-quote {
      margin-top: 48px;
      font-size: clamp(1.1rem, 2.5vw, 1.5rem);
      font-weight: 600;
      color: var(--text);
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.5;
      font-style: italic;
    }

    .drift-quote em {
      background: linear-gradient(135deg, var(--accent-bright), var(--orange));
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-style: normal;
    }

    /* ── Tools table ──────────────────────────────────────── */

    .tools-section {
      text-align: center;
    }

    .tools-table {
      margin: 48px auto 0;
      border-collapse: collapse;
      width: 100%;
      text-align: left;
      font-size: .875rem;
    }

    .tools-table th {
      color: var(--text-dim);
      font-weight: 600;
      font-size: .75rem;
      text-transform: uppercase;
      letter-spacing: .08em;
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
    }

    .tools-table td {
      padding: 14px 16px;
      border-bottom: 1px solid var(--border);
      vertical-align: top;
    }

    .tools-table tr:last-child td {
      border-bottom: none;
    }

    .tools-table td:first-child {
      font-family: 'SF Mono', 'Fira Code', monospace;
      font-size: .8rem;
      color: var(--accent-bright);
      white-space: nowrap;
    }

    .tools-table td:last-child {
      color: var(--text-muted);
    }

    .tools-table tbody tr {
      transition: background .15s;
    }

    .tools-table tbody tr:hover {
      background: var(--bg-subtle);
    }

    /* ── Install ──────────────────────────────────────────── */

    .install {
      text-align: center;
    }

    .install-code {
      margin: 40px auto 0;
      max-width: 640px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
    }

    .install-code .tab-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: rgba(255,255,255,.02);
      border-bottom: 1px solid var(--border);
      font-size: .75rem;
      color: var(--text-dim);
    }

    .install-code .tab-bar .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      display: inline-block;
    }

    .install-code .tab-bar .dot:nth-child(1) { background: #ef4444; }
    .install-code .tab-bar .dot:nth-child(2) { background: #eab308; }
    .install-code .tab-bar .dot:nth-child(3) { background: #22c55e; }

    .install-code pre {
      padding: 24px;
      overflow-x: auto;
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      font-size: .82rem;
      line-height: 1.8;
      color: var(--text-muted);
    }

    .install-code pre .key { color: var(--accent-bright); }
    .install-code pre .str { color: var(--green); }
    .install-code pre .comment { color: var(--text-dim); }
    .install-code pre .brace { color: var(--text-dim); }

    /* ── Security ─────────────────────────────────────────── */

    .security {
      text-align: center;
    }

    /* Trust badges row */

    .trust-badges {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 16px;
      margin-top: 48px;
    }

    .trust-badge {
      padding: 20px 16px;
      border-radius: var(--radius);
      background: rgba(52,211,153,.04);
      border: 1px solid rgba(52,211,153,.15);
      text-align: center;
      transition: border-color .2s, transform .2s;
    }

    .trust-badge:hover {
      border-color: rgba(52,211,153,.3);
      transform: translateY(-2px);
    }

    .trust-badge-icon {
      font-size: 1.5rem;
      margin-bottom: 10px;
      display: block;
    }

    .trust-badge h4 {
      font-size: .85rem;
      font-weight: 700;
      color: var(--green);
      margin-bottom: 4px;
    }

    .trust-badge p {
      font-size: .75rem;
      color: var(--text-dim);
      line-height: 1.4;
    }

    @media (max-width: 768px) {
      .trust-badges { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 480px) {
      .trust-badges { grid-template-columns: 1fr; }
    }

    /* Security card grid */

    .security-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      margin-top: 48px;
    }

    .security-item {
      padding: 28px 24px;
      border-radius: var(--radius);
      background: var(--bg-card);
      border: 1px solid var(--border);
      text-align: left;
      transition: border-color .2s, transform .2s;
    }

    .security-item:hover {
      border-color: var(--border-hover);
      transform: translateY(-2px);
    }

    .security-item .security-icon {
      font-size: 1.3rem;
      margin-bottom: 12px;
      display: block;
    }

    .security-item h3 {
      font-size: .95rem;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .security-item p {
      color: var(--text-muted);
      font-size: .85rem;
      line-height: 1.6;
    }

    .security-item code {
      font-family: 'SF Mono', 'Fira Code', monospace;
      font-size: .78rem;
      background: rgba(255,255,255,.06);
      padding: 2px 5px;
      border-radius: 4px;
      color: var(--accent-bright);
    }

    @media (max-width: 900px) {
      .security-grid { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 600px) {
      .security-grid { grid-template-columns: 1fr; }
    }

    /* Self-host callout */

    .security-callout {
      margin-top: 48px;
      padding: 32px;
      border-radius: var(--radius);
      background: rgba(52,211,153,.05);
      border: 1px solid rgba(52,211,153,.15);
      max-width: 740px;
      margin-left: auto;
      margin-right: auto;
      text-align: left;
    }

    .security-callout p {
      color: var(--text);
      font-size: 1.05rem;
      line-height: 1.7;
      text-align: left;
      max-width: none;
      margin: 0;
    }

    .security-callout p strong {
      color: var(--green);
    }

    .security-callout-actions {
      margin-top: 20px;
      display: flex;
      gap: 12px;
      justify-content: flex-start;
    }

    /* ── CTA ──────────────────────────────────────────────── */

    .cta {
      text-align: center;
      padding: 120px 0;
    }

    .cta h2 {
      font-size: clamp(2rem, 4vw, 3rem);
      font-weight: 800;
      letter-spacing: -0.03em;
      line-height: 1.2;
      margin-bottom: 16px;
    }

    .cta p {
      color: var(--text-muted);
      font-size: 1.05rem;
      max-width: 500px;
      margin: 0 auto 32px;
    }

    .cta-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* ── Footer ───────────────────────────────────────────── */

    footer {
      border-top: 1px solid var(--border);
      padding: 32px 0;
    }

    footer .container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: .8rem;
      color: var(--text-dim);
    }

    footer a {
      color: var(--text-muted);
      text-decoration: none;
      transition: color .15s;
    }

    footer a:hover { color: var(--text); }

    /* ── Vision banner ─────────────────────────────────────── */

    .vision {
      text-align: center;
      padding: 80px 0;
      background: linear-gradient(180deg, rgba(99,102,241,.06) 0%, transparent 100%);
      border-top: 1px solid var(--border);
      border-bottom: 1px solid var(--border);
    }

    .vision-brand {
      font-size: .85rem;
      font-weight: 600;
      color: var(--accent-bright);
      letter-spacing: .02em;
      margin-bottom: 16px;
    }

    .vision-brand a {
      color: var(--accent-bright);
      text-decoration: none;
      border-bottom: 1px solid rgba(165,180,252,.3);
      transition: border-color .15s;
    }

    .vision-brand a:hover { border-color: var(--accent-bright); }

    .vision h2 {
      font-size: clamp(1.5rem, 3.5vw, 2.2rem);
      font-weight: 800;
      letter-spacing: -0.02em;
      line-height: 1.3;
      max-width: 700px;
      margin: 0 auto 16px;
    }

    .vision p {
      color: var(--text-muted);
      font-size: 1.05rem;
      max-width: 640px;
      margin: 0 auto;
      line-height: 1.7;
    }

    .vision-lead {
      max-width: 700px !important;
    }

    .vision-lead strong {
      color: var(--accent-bright);
    }

    .vision-value-stack {
      margin-top: 48px;
    }

    .vision-value-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 32px;
      text-align: left;
      transition: border-color .2s;
    }

    .vision-value-card:hover {
      border-color: var(--border-hover);
    }

    .vision-value-card h3 {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 12px;
      color: var(--text);
    }

    .vision-value-card p {
      text-align: left;
      max-width: none;
      margin: 0 0 12px;
    }

    .vision-value-card p:last-child {
      margin-bottom: 0;
    }

    .vision-value-card p strong {
      color: var(--accent-bright);
    }

    .vision-value-hero {
      background: rgba(99,102,241,.06);
      border-color: rgba(99,102,241,.2);
      margin-bottom: 20px;
    }

    .vision-value-hero:hover {
      border-color: rgba(99,102,241,.35);
    }

    .vision-value-label {
      display: inline-block;
      font-size: .7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .1em;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(129,140,248,.15);
      color: var(--accent-bright);
      margin-bottom: 16px;
    }

    .vision-value-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    @media (max-width: 768px) {
      .vision-value-row { grid-template-columns: 1fr; }
    }

    /* ── Critical Context ─────────────────────────────────── */

    .critical-context {
      text-align: center;
    }

    .cc-pillars {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-top: 48px;
      max-width: 960px;
      margin-left: auto;
      margin-right: auto;
    }

    .cc-pillar {
      padding: 28px 24px;
      border-radius: var(--radius);
      background: var(--bg-card);
      border: 1px solid var(--border);
      text-align: left;
      transition: border-color .2s;
    }

    .cc-pillar:hover { border-color: var(--border-hover); }

    .cc-pillar .cc-icon {
      font-size: 1.4rem;
      margin-bottom: 12px;
      display: block;
    }

    .cc-pillar h3 {
      font-size: .95rem;
      font-weight: 700;
      margin-bottom: 6px;
      color: var(--accent-bright);
    }

    .cc-pillar p {
      color: var(--text-muted);
      font-size: .85rem;
      line-height: 1.6;
    }

    .cc-philosophy {
      margin-top: 48px;
      padding: 32px;
      border-radius: var(--radius);
      background: rgba(99,102,241,.05);
      border: 1px solid rgba(99,102,241,.15);
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }

    .cc-philosophy p {
      color: var(--text);
      font-size: 1.05rem;
      line-height: 1.7;
    }

    .cc-philosophy p strong {
      color: var(--accent-bright);
    }

    /* ── Pricing ──────────────────────────────────────────── */

    .pricing {
      text-align: center;
    }

    .pricing-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 24px;
      margin-top: 48px;
      max-width: 900px;
      margin-left: auto;
      margin-right: auto;
    }

    .price-card {
      border-radius: var(--radius);
      padding: 36px 32px;
      text-align: left;
      position: relative;
      transition: transform .2s;
    }

    .price-card:hover { transform: translateY(-2px); }

    .price-card.open-source {
      background: var(--bg-card);
      border: 1px solid var(--border);
    }

    .price-card.cloud {
      background: linear-gradient(135deg, rgba(99,102,241,.08), rgba(192,132,252,.08));
      border: 1px solid var(--accent-dim);
    }

    .price-card .price-badge {
      display: inline-block;
      font-size: .7rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .08em;
      padding: 4px 10px;
      border-radius: 999px;
      margin-bottom: 20px;
    }

    .price-card.open-source .price-badge {
      background: rgba(52,211,153,.12);
      color: var(--green);
    }

    .price-card.cloud .price-badge {
      background: rgba(129,140,248,.15);
      color: var(--accent-bright);
    }

    .price-card h3 {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .price-card .price-tagline {
      color: var(--text-muted);
      font-size: .9rem;
      margin-bottom: 20px;
    }

    .price-amount {
      font-size: 2.5rem;
      font-weight: 800;
      letter-spacing: -0.03em;
      line-height: 1;
      margin-bottom: 4px;
    }

    .price-amount .currency { font-size: 1.5rem; vertical-align: super; }
    .price-amount .period { font-size: .9rem; font-weight: 500; color: var(--text-muted); }

    .price-detail {
      color: var(--text-dim);
      font-size: .82rem;
      margin-bottom: 24px;
      line-height: 1.5;
    }

    .price-features {
      list-style: none;
      padding: 0;
      margin-bottom: 28px;
    }

    .price-features li {
      font-size: .875rem;
      color: var(--text-muted);
      padding: 6px 0 6px 22px;
      position: relative;
      line-height: 1.5;
    }

    .price-features li::before {
      content: '\2713';
      position: absolute;
      left: 0;
      color: var(--green);
      font-weight: 700;
    }

    .price-card .btn {
      width: 100%;
      justify-content: center;
    }

    .price-or {
      color: var(--text-dim);
      font-size: .8rem;
      margin-top: 12px;
      text-align: center;
    }

    @media (max-width: 768px) {
      .pricing-grid { grid-template-columns: 1fr; }
      .cc-pillars { grid-template-columns: 1fr; }
    }

    /* ── Interactive Sandbox Demo ─────────────────────────────── */

    .context-demo-section { padding: 0 0 80px; }

    .sandbox-frame {
      text-align: center;
      font-size: 1.1rem;
      color: var(--text-muted);
      margin-bottom: 32px;
      font-style: italic;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .context-demo {
      max-width: 1040px;
      margin: 0 auto;
      border-radius: 16px;
      overflow: hidden;
      border: 1px solid var(--border);
      background: var(--bg-card);
      box-shadow: 0 24px 80px rgba(0,0,0,.4), 0 0 0 1px rgba(255,255,255,.03) inset;
    }

    .demo-chrome {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 14px 20px;
      background: rgba(255,255,255,.02);
      border-bottom: 1px solid var(--border);
    }

    .demo-chrome .dot { width: 10px; height: 10px; border-radius: 50%; }
    .demo-chrome .dot:nth-child(1) { background: #ef4444; }
    .demo-chrome .dot:nth-child(2) { background: #eab308; }
    .demo-chrome .dot:nth-child(3) { background: #22c55e; }

    .demo-chrome .demo-title {
      margin-left: 12px;
      font-size: .78rem;
      color: var(--text-dim);
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
    }

    /* Prompt bar */

    .sandbox-prompt-bar {
      padding: 16px 20px 12px;
      border-bottom: 1px solid var(--border);
      background: rgba(255,255,255,.015);
    }

    .sandbox-input-wrap {
      display: flex;
      gap: 8px;
      margin-bottom: 12px;
    }

    .sandbox-input {
      flex: 1;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 10px 14px;
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      font-size: .82rem;
      color: var(--text);
      outline: none;
      transition: border-color .15s;
    }

    .sandbox-input::placeholder { color: var(--text-dim); }
    .sandbox-input:focus { border-color: var(--accent-dim); }

    .sandbox-run-btn {
      padding: 10px 20px;
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: var(--radius-sm);
      font-family: inherit;
      font-size: .82rem;
      font-weight: 600;
      cursor: pointer;
      transition: background .15s;
      white-space: nowrap;
    }

    .sandbox-run-btn:hover { background: var(--accent-bright); }

    .sandbox-chips {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
    }

    .sandbox-chip {
      padding: 5px 12px;
      border-radius: 999px;
      font-size: .75rem;
      font-weight: 500;
      color: var(--text-dim);
      background: transparent;
      border: 1px solid var(--border);
      cursor: pointer;
      font-family: inherit;
      transition: all .2s;
      white-space: nowrap;
    }

    .sandbox-chip:hover {
      color: var(--text-muted);
      border-color: var(--border-hover);
      background: var(--bg-subtle);
    }

    .sandbox-chip.active {
      color: var(--accent-bright);
      border-color: var(--accent-dim);
      background: rgba(99,102,241,.1);
    }

    .sandbox-nudge {
      display: none;
      padding: 10px 16px;
      font-size: .82rem;
      color: var(--text-dim);
      text-align: center;
      border-bottom: 1px solid var(--border);
      background: rgba(251,146,60,.04);
      animation: nudge-fade .4s ease;
    }

    .sandbox-nudge.visible { display: block; }

    @keyframes nudge-fade {
      from { opacity: 0; transform: translateY(-4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .nudge-link {
      color: var(--orange);
      cursor: pointer;
      text-decoration: underline;
      border: none;
      background: none;
      font: inherit;
    }

    /* Mobile tab toggle */

    .sandbox-mobile-tabs { display: none; }

    /* Panels */

    .demo-panels {
      display: grid;
      grid-template-columns: 1fr 1fr;
      min-height: 340px;
    }

    .demo-panel {
      padding: 0;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
    }

    .demo-panel + .demo-panel {
      border-left: 1px solid var(--border);
    }

    .demo-panel-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      border-bottom: 1px solid var(--border);
      font-size: .75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: .08em;
    }

    .demo-without .demo-panel-header {
      color: var(--red);
      background: rgba(248,113,113,.04);
    }

    .demo-with .demo-panel-header {
      color: var(--green);
      background: rgba(52,211,153,.04);
    }

    .demo-attempt {
      font-weight: 700;
      font-variant-numeric: tabular-nums;
    }

    .demo-panel-body {
      flex: 1;
      padding: 20px;
      font-family: 'SF Mono', 'Fira Code', 'Cascadia Code', monospace;
      font-size: .8rem;
      line-height: 1.7;
      color: var(--text-muted);
      overflow: hidden;
    }

    .demo-context-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      padding: 10px 20px;
      border-bottom: 1px solid var(--border);
      background: rgba(52,211,153,.03);
      min-height: 40px;
    }

    .demo-kb-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: .68rem;
      font-family: 'SF Mono', 'Fira Code', monospace;
      font-weight: 600;
      background: rgba(52,211,153,.1);
      color: var(--green);
      opacity: 0;
      transform: translateY(4px);
      transition: opacity .3s ease, transform .3s ease;
    }

    .demo-kb-badge.visible { opacity: 1; transform: translateY(0); }

    .demo-kb-badge .badge-check {
      opacity: 0;
      transition: opacity .2s ease;
    }

    .demo-kb-badge.loaded .badge-check { opacity: 1; }

    .demo-prompt-line {
      margin-bottom: 16px;
      padding-bottom: 12px;
      border-bottom: 1px solid rgba(255,255,255,.05);
    }

    .demo-prompt-label {
      color: var(--accent-bright);
      font-weight: 600;
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .06em;
      margin-bottom: 6px;
    }

    .demo-prompt-text { color: var(--text); }

    .demo-response-label {
      font-weight: 600;
      font-size: .7rem;
      text-transform: uppercase;
      letter-spacing: .06em;
      margin-bottom: 8px;
    }

    .demo-without .demo-response-label { color: var(--text-dim); }
    .demo-with .demo-response-label { color: var(--green); }

    .demo-response-text {
      min-height: 100px;
      position: relative;
      white-space: pre-wrap;
      word-break: break-word;
    }

    .demo-cursor {
      display: inline-block;
      width: 2px;
      height: 1.1em;
      background: var(--accent-bright);
      vertical-align: text-bottom;
      animation: blink-cursor .8s steps(1) infinite;
      margin-left: 1px;
    }

    @keyframes blink-cursor {
      0%, 100% { opacity: 1; }
      50% { opacity: 0; }
    }

    .demo-error {
      color: var(--red);
      text-decoration: underline wavy var(--red);
      text-underline-offset: 3px;
      text-decoration-thickness: 1px;
    }

    .demo-correct { color: var(--green); }

    .demo-kb-ref {
      color: var(--accent-bright);
      font-weight: 600;
      font-size: .72rem;
    }

    /* Scorecard strip */

    .sandbox-scorecard {
      display: grid;
      grid-template-columns: 1fr 1fr;
      border-top: 1px solid var(--border);
      opacity: 0;
      transform: translateY(4px);
      transition: opacity .5s ease, transform .5s ease;
    }

    .sandbox-scorecard.visible { opacity: 1; transform: translateY(0); }

    .scorecard-half {
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: .75rem;
      min-height: 44px;
    }

    .scorecard-half + .scorecard-half {
      border-left: 1px solid var(--border);
    }

    .scorecard-bad { background: rgba(248,113,113,.04); }
    .scorecard-good { background: rgba(52,211,153,.04); }

    .scorecard-text { font-weight: 600; }
    .scorecard-bad .scorecard-text { color: var(--red); }
    .scorecard-good .scorecard-text { color: var(--green); }

    .scorecard-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 10px;
      border-radius: 999px;
      font-size: .72rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .scorecard-bad .scorecard-badge {
      background: rgba(248,113,113,.12);
      color: var(--red);
    }

    .scorecard-good .scorecard-badge {
      background: rgba(52,211,153,.12);
      color: var(--green);
    }

    /* Replay */

    .demo-replay {
      display: none;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 20px;
      border-top: 1px solid var(--border);
      background: rgba(255,255,255,.02);
      font-size: .8rem;
      color: var(--text-dim);
      cursor: pointer;
      transition: color .15s, background .15s;
      border: none;
      width: 100%;
      font-family: inherit;
    }

    .demo-replay.visible { display: flex; }

    .demo-replay:hover {
      color: var(--text);
      background: rgba(255,255,255,.04);
    }

    .demo-replay svg { transition: transform .3s ease; }
    .demo-replay:hover svg { transform: rotate(-180deg); }

    /* CTA reveal */

    .sandbox-cta {
      text-align: center;
      padding: 48px 0 0;
      opacity: 0;
      transform: translateY(16px);
      transition: opacity .6s ease, transform .6s ease;
    }

    .sandbox-cta.visible { opacity: 1; transform: translateY(0); }

    .sandbox-cta h3 {
      font-size: clamp(1.3rem, 3vw, 1.8rem);
      font-weight: 800;
      letter-spacing: -0.02em;
      margin-bottom: 20px;
    }

    .sandbox-cta-actions {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    /* Demo mobile responsive */

    @media (max-width: 768px) {
      .sandbox-mobile-tabs {
        display: flex;
        gap: 0;
        border-bottom: 1px solid var(--border);
      }

      .sandbox-tab {
        flex: 1;
        padding: 10px 16px;
        font-size: .75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: .06em;
        text-align: center;
        border: none;
        cursor: pointer;
        font-family: inherit;
        transition: all .15s;
        background: transparent;
        color: var(--text-dim);
      }

      .sandbox-tab[data-panel="without"] { color: var(--red); }
      .sandbox-tab[data-panel="with"] { color: var(--green); }
      .sandbox-tab.active { background: rgba(255,255,255,.04); }
      .sandbox-tab[data-panel="without"].active { background: rgba(248,113,113,.06); }
      .sandbox-tab[data-panel="with"].active { background: rgba(52,211,153,.06); }

      .demo-panels { grid-template-columns: 1fr; }
      .demo-panel { display: none; }
      .demo-panel.mobile-active { display: flex; }

      .demo-panel + .demo-panel {
        border-left: none;
        border-top: 1px solid var(--border);
      }

      .demo-panel-body { font-size: .75rem; }

      .context-demo {
        border-radius: 12px;
        margin: 0 -8px;
      }

      .sandbox-scorecard { grid-template-columns: 1fr; }

      .scorecard-half + .scorecard-half {
        border-left: none;
        border-top: 1px solid var(--border);
      }

      .sandbox-chips {
        overflow-x: auto;
        flex-wrap: nowrap;
        padding-bottom: 4px;
      }

      .sandbox-chip { flex-shrink: 0; }
    }

    /* ── Workflow Teaser ──────────────────────────────────── */

    .wf-teaser {
      text-align: center;
    }

    .wf-teaser-preview {
      max-width: 680px;
      margin: 40px auto 0;
      border-radius: var(--radius);
      overflow: hidden;
      border: 1px solid var(--border);
      background: var(--bg-card);
      box-shadow: 0 16px 60px rgba(0,0,0,.3);
      text-align: left;
    }

    .wf-teaser-chrome {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 18px;
      background: rgba(255,255,255,.02);
      border-bottom: 1px solid var(--border);
      font-size: .72rem;
      color: var(--text-dim);
    }

    .wf-teaser-chrome .dot { width: 8px; height: 8px; border-radius: 50%; }
    .wf-teaser-chrome .dot:nth-child(1) { background: #ef4444; }
    .wf-teaser-chrome .dot:nth-child(2) { background: #eab308; }
    .wf-teaser-chrome .dot:nth-child(3) { background: #22c55e; }

    .wf-teaser-tabs {
      display: flex;
      gap: 0;
      padding: 10px 18px;
      border-bottom: 1px solid var(--border);
    }

    .wf-teaser-tab {
      padding: 4px 14px;
      border-radius: 999px;
      font-size: .72rem;
      font-weight: 600;
      color: var(--text-dim);
    }

    .wf-teaser-tab.active {
      background: var(--accent-dim);
      color: #fff;
    }

    .wf-teaser-body {
      padding: 18px;
      font-size: .82rem;
      line-height: 1.6;
    }

    .wf-teaser-msg {
      margin-bottom: 12px;
    }

    .wf-teaser-msg:last-child { margin-bottom: 0; }

    .wf-teaser-label {
      font-size: .65rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: .06em;
      margin-bottom: 4px;
    }

    .wf-teaser-label-user { color: var(--accent-bright); }
    .wf-teaser-label-ai { color: var(--green); }

    .wf-teaser-user {
      padding: 10px 14px;
      border-radius: var(--radius-sm);
      background: rgba(129,140,248,.06);
      border: 1px solid rgba(129,140,248,.12);
      color: var(--text);
    }

    .wf-teaser-ai {
      padding: 10px 14px;
      border-radius: var(--radius-sm);
      background: rgba(52,211,153,.03);
      border: 1px solid rgba(52,211,153,.1);
      color: var(--text-muted);
    }

    .wf-teaser-ai strong { color: var(--text); }

    .wf-teaser-ref {
      color: var(--accent-bright);
      font-weight: 600;
      font-size: .85em;
    }

    .wf-teaser-fade {
      position: relative;
    }

    .wf-teaser-fade::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 48px;
      background: linear-gradient(transparent, var(--bg-card));
      pointer-events: none;
    }

    .wf-teaser-cta {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 14px 18px;
      border-top: 1px solid var(--border);
      background: rgba(255,255,255,.02);
      font-size: .82rem;
      font-weight: 600;
      color: var(--accent-bright);
      text-decoration: none;
      transition: color .15s, background .15s;
    }

    .wf-teaser-cta:hover {
      color: var(--text);
      background: rgba(255,255,255,.04);
    }

    .wf-teaser-cta svg {
      transition: transform .2s ease;
    }

    .wf-teaser-cta:hover svg {
      transform: translateX(3px);
    }

    /* ── Scroll animations ────────────────────────────────── */

    .fade-in {
      opacity: 0;
      transform: translateY(24px);
      transition: opacity .6s ease, transform .6s ease;
    }

    .fade-in.visible {
      opacity: 1;
      transform: translateY(0);
    }

    /* ── Responsive ───────────────────────────────────────── */

    @media (max-width: 768px) {
      section { padding: 72px 0; }
      .hero { padding: 80px 0 60px; }
      .nav-links { display: none; }
      .feature-grid { grid-template-columns: 1fr; }
      .problem-grid { grid-template-columns: 1fr; }
      .security-grid { grid-template-columns: 1fr; }
      .vision-value-row { grid-template-columns: 1fr; }
      .tools-table { font-size: .8rem; }
      .tools-table th, .tools-table td { padding: 10px 12px; }
    }
  </style>
</head>
<body>

<div class="glow"></div>

<!-- ── Nav ──────────────────────────────────────────────────── -->

<nav>
  <div class="container">
    <a href="#" class="nav-brand">
      <span class="dot"></span>
      SynergyOS<span style="color:var(--text-dim);font-weight:400">.ai</span>
    </a>
    <ul class="nav-links">
      <li><a href="#problem">Why</a></li>
      <li><a href="#context">Critical Context</a></li>
      <li><a href="workflow.html">Workflow</a></li>
      <li><a href="code-is-not-truth.html">Code &ne; Truth</a></li>
      <li><a href="product-brain.html">Product Brain</a></li>
      <li><a href="#features">Features</a></li>
      <li><a href="#security">Security</a></li>
      <li><a href="#pricing">Pricing</a></li>
      <li><a href="#install">Install</a></li>
    </ul>
    <div style="display:flex;gap:8px;align-items:center">
      <a href="https://github.com/synergyai-os/product-os-mcp" class="btn btn-ghost" target="_blank" rel="noopener">GitHub</a>
      <a href="https://synergyos.ai" class="btn btn-primary" target="_blank" rel="noopener">Start free trial</a>
    </div>
  </div>
</nav>

<!-- ── Hero ─────────────────────────────────────────────────── -->

<section class="hero">
  <div class="container">
    <div class="hero-badge">
      <span class="pulse"></span>
      Open Source &middot; MCP Server for Cursor
    </div>
    <h1>Your MDs are lying to you.<br><span class="gradient">Fix it while you code.</span></h1>
    <p class="hero-lead">You've got 40 markdown files, a README that was accurate three sprints ago, and Cursor rules that contradict each other. You do your best to keep up. <strong>It's an impossible task</strong> — and you know it.</p>
    <p>Product OS replaces all of that with a living knowledge base your AI assistant reads and writes in real time. One source of truth, always current, zero maintenance. Your context problems are over.</p>
    <div class="hero-actions">
      <a href="#install" class="btn btn-primary">Install in Cursor &mdash; 5 min</a>
      <a href="#context" class="btn btn-ghost">How it works</a>
      <a href="#pricing" class="btn btn-ghost">See pricing</a>
    </div>
  </div>
</section>

<!-- ── Interactive Sandbox Demo ─────────────────────────────── -->

<section class="context-demo-section fade-in" id="sandbox-demo">
  <div class="container">
    <p class="sandbox-frame">Every product has domain knowledge your AI doesn't know. Here's what happens when it does.</p>

    <div class="context-demo" id="context-demo">

      <div class="demo-chrome">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        <span class="demo-title">cursor &mdash; your-project</span>
      </div>

      <div class="sandbox-prompt-bar">
        <div class="sandbox-input-wrap">
          <input type="text" class="sandbox-input" id="sandbox-input" placeholder="Type a prompt or try one below..." autocomplete="off" />
          <button class="sandbox-run-btn" id="sandbox-run">Run</button>
        </div>
        <div class="sandbox-chips" id="sandbox-chips"></div>
      </div>

      <div class="sandbox-nudge" id="sandbox-nudge">
        Great question! Try one of these domain-loaded prompts to see the real difference. <button class="nudge-link" id="nudge-dismiss">Try a prompt &darr;</button>
      </div>

      <div class="sandbox-mobile-tabs" id="sandbox-mobile-tabs">
        <button class="sandbox-tab active" data-panel="without">Without Product OS</button>
        <button class="sandbox-tab" data-panel="with">With Product OS</button>
      </div>

      <div class="demo-panels" id="demo-panels">
        <div class="demo-panel demo-without mobile-active" id="panel-without">
          <div class="demo-panel-header">
            <span>Without Product OS</span>
            <span class="demo-attempt" id="demo-attempt-without"></span>
          </div>
          <div class="demo-panel-body">
            <div class="demo-prompt-line">
              <div class="demo-prompt-label">You</div>
              <div class="demo-prompt-text" id="demo-prompt-without"></div>
            </div>
            <div class="demo-response-label">AI Assistant</div>
            <div class="demo-response-text" id="demo-response-without"></div>
          </div>
        </div>

        <div class="demo-panel demo-with" id="panel-with">
          <div class="demo-panel-header">
            <span>With Product OS</span>
            <span class="demo-attempt" id="demo-attempt-with"></span>
          </div>
          <div class="demo-context-bar" id="demo-context-bar"></div>
          <div class="demo-panel-body">
            <div class="demo-prompt-line">
              <div class="demo-prompt-label">You</div>
              <div class="demo-prompt-text" id="demo-prompt-with"></div>
            </div>
            <div class="demo-response-label">AI Assistant</div>
            <div class="demo-response-text" id="demo-response-with"></div>
          </div>
        </div>
      </div>

      <div class="sandbox-scorecard" id="sandbox-scorecard">
        <div class="scorecard-half scorecard-bad">
          <span class="scorecard-text" id="scorecard-text-bad"></span>
          <span class="scorecard-badge" id="scorecard-badge-bad"></span>
        </div>
        <div class="scorecard-half scorecard-good">
          <span class="scorecard-text" id="scorecard-text-good"></span>
          <span class="scorecard-badge" id="scorecard-badge-good"></span>
        </div>
      </div>

      <button class="demo-replay" id="demo-replay" aria-label="Replay demo">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Watch again
      </button>

    </div>

    <div class="sandbox-cta" id="sandbox-cta">
      <h3>Give your AI a Product Brain</h3>
      <div class="sandbox-cta-actions">
        <a href="#install" class="btn btn-primary">Install in Cursor &mdash; 5 min</a>
        <a href="#pricing" class="btn btn-ghost">See pricing</a>
      </div>
    </div>
  </div>
</section>

<!-- ── Vision ──────────────────────────────────────────────── -->

<section class="vision fade-in">
  <div class="container">
    <div class="vision-brand"><a href="https://synergyos.ai" target="_blank" rel="noopener">SynergyOS.ai</a> &mdash; The Open Source AI Operating System for Product Teams</div>
    <h2>Get it right the first time. Every time.</h2>
    <p class="vision-lead">Our North Star is <strong>First Time Good %</strong> &mdash; the rate at which your team ships coherent, correct work on the first attempt. No rework. No "oops, that's not how we do it." No third re-run because the AI didn't have the context it needed.</p>

    <div class="vision-value-stack">
      <div class="vision-value-card vision-value-hero">
        <span class="vision-value-label">The Key Feature</span>
        <h3>Critical Context &mdash; delivered, not discovered</h3>
        <p>AI is powerful. But without the right context, it hallucinates your domain, ignores your rules, and invents its own terminology. You waste hours managing prompts, re-running generations, and patching incoherent output.</p>
        <p><strong>Only Product OS delivers the right information, at the right time, in the right quantity</strong> &mdash; directly into your LLM's context window. No prompt engineering. No copy-pasting from wikis. No "let me find that doc first." Your AI just <em>knows</em>.</p>
      </div>

      <div class="vision-value-row">
        <div class="vision-value-card">
          <h3>Effortless by design</h3>
          <p>Five-minute setup. Zero configuration after that. Product OS works silently in the background &mdash; your AI assistant pulls the context it needs, when it needs it. You stay in flow.</p>
        </div>
        <div class="vision-value-card">
          <h3>Gets smarter with every use</h3>
          <p>Every captured decision, rule, and term makes the context richer and more accurate. More people using it means better answers for everyone. The flywheel compounds &mdash; usage drives quality, quality drives engagement.</p>
        </div>
        <div class="vision-value-card">
          <h3>Build coherently, then rest</h3>
          <p>When your first attempt is the right attempt, you stop burning cycles on rework. That time goes back to thinking deeply about your solution &mdash; or stepping away to recharge. Both make better products.</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- ── Problem ──────────────────────────────────────────────── -->

<section class="problem fade-in" id="problem">
  <div class="container">
    <span class="section-label">The problem</span>
    <h2 class="section-title">Documentation doesn't know it's wrong</h2>
    <p class="section-sub">Your wiki says one thing. Your code says another. Nobody notices until something breaks.</p>

    <div class="problem-grid">
      <div class="problem-card">
        <span class="icon">&#128196;</span>
        <h3>Static docs decay instantly</h3>
        <p>The moment you write a wiki page, it starts drifting. Terminology changes, schemas evolve, decisions get revisited. The doc doesn't update itself.</p>
      </div>
      <div class="problem-card">
        <span class="icon">&#128268;</span>
        <h3>Knowledge is scattered</h3>
        <p>Business rules in Notion. Decisions in Slack. Terminology in someone's head. Tensions in a spreadsheet. No connections between them.</p>
      </div>
      <div class="problem-card">
        <span class="icon">&#129302;</span>
        <h3>AI can't access what matters</h3>
        <p>Your coding assistant is powerful but blind to your product context. It doesn't know your glossary, your rules, your decisions, or why things were built the way they are.</p>
      </div>
    </div>
  </div>
</section>

<!-- ── Drift comparison ────────────────────────────────────── -->

<section class="drift fade-in" id="drift">
  <div class="container">
    <span class="section-label">The shift</span>
    <h2 class="section-title">From static snapshots to living truth</h2>

    <div class="drift-compare">
      <div class="drift-col old">
        <h3>Static documentation</h3>
        <ul>
          <li>Outdated before the day is over</li>
          <li>Doesn't know it's wrong</li>
          <li>Flat files, no connections</li>
          <li>AI can't query it</li>
          <li>Nobody maintains it</li>
          <li>One person's snapshot in time</li>
        </ul>
      </div>
      <div class="drift-col new">
        <h3>Product OS</h3>
        <ul>
          <li>Evolves as the product evolves</li>
          <li>Detects its own drift against code</li>
          <li>Knowledge graph with typed relations</li>
          <li>AI reads and writes natively</li>
          <li>Every change audited and versioned</li>
          <li>Single source of truth for the team</li>
        </ul>
      </div>
    </div>

    <p class="drift-quote">"Static documentation is a snapshot of what someone believed was true at a point in time. Product OS is <em>what's actually true right now</em> — and it knows when it's drifting."</p>
  </div>
</section>

<!-- ── Architecture ────────────────────────────────────────── -->

<section class="architecture fade-in" id="how">
  <div class="container">
    <span class="section-label">How it works</span>
    <h2 class="section-title">AI-native by design</h2>
    <p class="section-sub">Product OS runs as an MCP server inside Cursor. Your AI assistant gets direct, authenticated access to your team's knowledge graph.</p>

    <div class="flow-container" id="flow-demo">

      <div class="flow-step" id="fs0">
        <div class="flow-step-icon">💻</div>
        <div class="flow-step-body">
          <div class="flow-step-title">Cursor IDE</div>
          <div class="flow-step-desc">Your AI assistant asks a question</div>
          <div class="flow-step-activity">
            <div class="flow-act" id="fa0a"><span class="flow-act-val" id="fa0a-text"></span></div>
          </div>
        </div>
      </div>

      <div class="flow-connector" id="fc0">
        <div class="flow-connector-track"></div>
        <span class="flow-connector-label">stdio</span>
      </div>

      <div class="flow-step" id="fs1">
        <div class="flow-step-icon">⚡</div>
        <div class="flow-step-body">
          <div class="flow-step-title">Product OS MCP</div>
          <div class="flow-step-desc">20+ tools, resources, and prompts</div>
          <div class="flow-step-activity">
            <div class="flow-act" id="fa1a"><span class="flow-act-cmd">&#8594; kb-search</span> <span class="flow-act-val">"supplier validation"</span></div>
            <div class="flow-act" id="fa1b"><span class="flow-act-cmd">&#8594; gather-context</span> <span class="flow-act-val">BR-012</span></div>
          </div>
        </div>
      </div>

      <div class="flow-connector" id="fc1">
        <div class="flow-connector-track"></div>
        <span class="flow-connector-label">HTTPS + Bearer token</span>
      </div>

      <div class="flow-step" id="fs2">
        <div class="flow-step-icon">🔐</div>
        <div class="flow-step-body">
          <div class="flow-step-title">Convex HTTP Action</div>
          <div class="flow-step-desc">API key validation, workspace scoping</div>
          <div class="flow-step-activity">
            <div class="flow-act" id="fa2a"><span class="flow-act-val">Bearer ••••••7f3a</span> <span class="flow-act-ok">&#10003; valid</span></div>
            <div class="flow-act" id="fa2b"><span class="flow-act-val">workspace: acme-corp</span> <span class="flow-act-ok">&#10003; scoped</span></div>
          </div>
        </div>
      </div>

      <div class="flow-connector" id="fc2">
        <div class="flow-connector-track"></div>
        <span class="flow-connector-label">internal functions</span>
      </div>

      <div class="flow-step" id="fs3">
        <div class="flow-step-icon">📚</div>
        <div class="flow-step-body">
          <div class="flow-step-title">Knowledge Base</div>
          <div class="flow-step-desc">Glossary, rules, decisions, tensions, strategy</div>
          <div class="flow-step-activity">
            <div class="flow-act" id="fa3a"><span class="flow-act-badge">BR-012</span> <span class="flow-act-badge-text">Supplier field governance</span></div>
            <div class="flow-act" id="fa3b"><span class="flow-act-badge">GT-019</span> <span class="flow-act-badge-text">supplier = external entity</span></div>
            <div class="flow-act" id="fa3c"><span class="flow-act-badge">DR-005</span> <span class="flow-act-badge-text">Use suppliers table, not purchases</span></div>
            <div class="flow-act" id="fa3d"><span class="flow-act-badge">BR-015</span> <span class="flow-act-badge-text">Validate against approved list</span></div>
          </div>
        </div>
      </div>

      <div class="flow-connector" id="fc3">
        <div class="flow-connector-track"></div>
        <span class="flow-connector-label">context enriched</span>
      </div>

      <div class="flow-response" id="flow-resp">
        <div class="flow-response-title">&#10003; Response enriched with critical context</div>
        <div class="flow-response-body">AI now knows: use <span class="hi">supplier</span> (not vendor), reference the <span class="hi">suppliers</span> table, validate against <span class="ref">BR-012</span> governance rules, and check the approved supplier list per <span class="ref">BR-015</span>. First time good.</div>
      </div>

      <button class="flow-replay-btn" id="flow-replay-btn" aria-label="Replay">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>
        Replay
      </button>

    </div>
  </div>
</section>

<!-- ── Workflow Teaser ──────────────────────────────────────── -->

<section class="wf-teaser fade-in" id="workflow">
  <div class="container">
    <span class="section-label">See it in action</span>
    <h2 class="section-title">Your AI Chat Workflow</h2>
    <p class="section-sub">Watch how 4 conversations take you from raw idea to shipped code &mdash; with zero rework.</p>

    <div class="wf-teaser-preview">
      <div class="wf-teaser-chrome">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        <span style="margin-left:8px">cursor &mdash; your-project</span>
      </div>
      <div class="wf-teaser-tabs">
        <span class="wf-teaser-tab active">Shape</span>
        <span class="wf-teaser-tab">Scope</span>
        <span class="wf-teaser-tab">Tickets</span>
        <span class="wf-teaser-tab">Build</span>
      </div>
      <div class="wf-teaser-body wf-teaser-fade">
        <div class="wf-teaser-msg">
          <div class="wf-teaser-label wf-teaser-label-user">You</div>
          <div class="wf-teaser-user">We keep getting bugs because devs use "vendor" instead of "supplier". Help me shape this into a bet.</div>
        </div>
        <div class="wf-teaser-msg">
          <div class="wf-teaser-label wf-teaser-label-ai">AI Assistant</div>
          <div class="wf-teaser-ai">Found <span class="wf-teaser-ref">TN-008</span> (terminology drift) and <span class="wf-teaser-ref">GT-019</span> (supplier = canonical term).<br><br><strong>Problem:</strong> Developers create fields like <code style="font-size:.85em;background:rgba(255,255,255,.06);padding:2px 5px;border-radius:3px;color:var(--accent-bright)">vendorName</code> because there's no enforced glossary. This contradicts <span class="wf-teaser-ref">BR-012</span>...</div>
        </div>
      </div>
      <a href="workflow.html" class="wf-teaser-cta">
        Watch the full workflow
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
      </a>
    </div>
  </div>
</section>

<!-- ── Critical Context ─────────────────────────────────────── -->

<section class="critical-context fade-in" id="context">
  <div class="container">
    <span class="section-label">The philosophy</span>
    <h2 class="section-title">Critical Context</h2>
    <p class="section-sub">The right knowledge, at the right time, at the right speed, in the right place — based on what's most important right now.</p>

    <div class="cc-pillars">
      <div class="cc-pillar">
        <span class="cc-icon">&#127919;</span>
        <h3>Right content</h3>
        <p>Not everything at once. The business rule that governs this feature. The glossary term for this field. The decision that explains why.</p>
      </div>
      <div class="cc-pillar">
        <span class="cc-icon">&#9201;</span>
        <h3>Right time</h3>
        <p>Knowledge surfaces when you need it — while you're coding, not after you've shipped the wrong thing. AI asks the KB, not you.</p>
      </div>
      <div class="cc-pillar">
        <span class="cc-icon">&#127939;</span>
        <h3>Right speed</h3>
        <p>No context-switching to wikis. No Slack rabbit holes. One tool call, structured answer, back to work. Flow state preserved.</p>
      </div>
      <div class="cc-pillar">
        <span class="cc-icon">&#128205;</span>
        <h3>Right place</h3>
        <p>Inside your editor. Where the work happens. Not a separate browser tab, not a meeting, not an email chain.</p>
      </div>
    </div>

    <div class="cc-philosophy">
      <p>Product teams using SynergyOS with Product OS MCP get <strong>full awareness of business context</strong> — the coherent product vision, strategy, and outcomes they need to build the right thing. Critical Context means you never feel rushed or stressed because the system serves what's most important, <strong>without you having to go find it</strong>.</p>
    </div>
  </div>
</section>

<!-- ── Features ────────────────────────────────────────────── -->

<section class="features fade-in" id="features">
  <div class="container">
    <span class="section-label">Capabilities</span>
    <h2 class="section-title">Everything your AI needs to know</h2>
    <p class="section-sub">Search, capture, connect, and verify — all from natural language in your editor.</p>

    <div class="feature-grid">
      <div class="feature-card">
        <span class="tag tag-read">Search</span>
        <h3>Full-text search across everything</h3>
        <p>Use <code>kb-search</code> to find any entry across all collections — glossary terms, business rules, decisions, tensions. Scoped by collection or status.</p>
      </div>

      <div class="feature-card">
        <span class="tag tag-write">Capture</span>
        <h3>One-call smart capture</h3>
        <p><code>smart-capture</code> creates an entry, auto-links related entries, and returns a quality scorecard. One tool call replaces a multi-step workflow.</p>
      </div>

      <div class="feature-card">
        <span class="tag tag-graph">Graph</span>
        <h3>Knowledge graph traversal</h3>
        <p><code>gather-context</code> walks the graph and returns every connected entry — glossary terms, rules, tensions, decisions — grouped by collection.</p>
      </div>

      <div class="feature-card">
        <span class="tag tag-verify">Verify</span>
        <h3>Drift detection against code</h3>
        <p><code>verify</code> parses your schema and filesystem, checks every code mapping in the KB, and produces a trust score. It knows when knowledge has drifted.</p>
      </div>

      <div class="feature-card">
        <span class="tag tag-read">Quality</span>
        <h3>Collection-aware quality scoring</h3>
        <p><code>quality-check</code> scores entries against criteria specific to their collection. A tension needs severity. A glossary term needs a canonical definition.</p>
      </div>

      <div class="feature-card">
        <span class="tag tag-write">Governance</span>
        <h3>Built-in governance workflow</h3>
        <p>Governed collections (glossary, rules, standards, strategy) require <code>draft</code> status. Capture now, curate later — no unreviewed knowledge becomes canonical.</p>
      </div>
    </div>
  </div>
</section>

<!-- ── Tools ───────────────────────────────────────────────── -->

<section class="tools-section fade-in" id="tools">
  <div class="container">
    <span class="section-label">20+ Tools</span>
    <h2 class="section-title">The full toolkit</h2>
    <p class="section-sub">Every tool is accessible via natural language in Cursor.</p>

    <table class="tools-table">
      <thead>
        <tr><th>Tool</th><th>What it does</th></tr>
      </thead>
      <tbody>
        <tr><td>health</td><td>Verify connectivity, get workspace stats and latency</td></tr>
        <tr><td>kb-search</td><td>Full-text search across all knowledge entries</td></tr>
        <tr><td>list-collections</td><td>Browse all collection schemas and field definitions</td></tr>
        <tr><td>list-entries</td><td>Browse entries with filters for status, tag, or label</td></tr>
        <tr><td>get-entry</td><td>Full record — data, labels, relations, change history</td></tr>
        <tr><td>smart-capture</td><td>Create entry + auto-link + quality score in one call</td></tr>
        <tr><td>create-entry</td><td>Create with full field control</td></tr>
        <tr><td>update-entry</td><td>Partial update — merges with existing data</td></tr>
        <tr><td>gather-context</td><td>Multi-hop graph traversal around any entry</td></tr>
        <tr><td>suggest-links</td><td>Discover potential connections for an entry</td></tr>
        <tr><td>relate-entries</td><td>Create typed relations between any two entries</td></tr>
        <tr><td>find-related</td><td>List all direct relations for an entry</td></tr>
        <tr><td>quality-check</td><td>Score an entry against collection-specific criteria</td></tr>
        <tr><td>review-rules</td><td>Surface all business rules for a domain</td></tr>
        <tr><td>verify</td><td>Check KB entries against the actual codebase</td></tr>
        <tr><td>list-labels</td><td>Browse workspace labels with hierarchy</td></tr>
        <tr><td>manage-labels</td><td>Create, update, or delete labels</td></tr>
        <tr><td>label-entry</td><td>Apply or remove labels from any entry</td></tr>
        <tr><td>quick-capture</td><td>Minimal-ceremony draft entry creation</td></tr>
        <tr><td>mcp-audit</td><td>Session audit log with read/write/search stats</td></tr>
      </tbody>
    </table>
  </div>
</section>

<!-- ── Install ─────────────────────────────────────────────── -->

<section class="install fade-in" id="install">
  <div class="container">
    <span class="section-label">Self-host</span>
    <h2 class="section-title">One config, instant access</h2>
    <p class="section-sub">Self-hosting? Add this to your <code>.cursor/mcp.json</code> and restart Cursor. Using <a href="https://synergyos.ai" style="color:var(--accent-bright);text-decoration:none;border-bottom:1px solid rgba(165,180,252,.3)" target="_blank" rel="noopener">SynergyOS.ai Cloud</a>? We generate this config for you.</p>

    <div class="install-code">
      <div class="tab-bar">
        <span class="dot"></span><span class="dot"></span><span class="dot"></span>
        <span style="margin-left: 8px">.cursor/mcp.json</span>
      </div>
      <pre><span class="brace">{</span>
  <span class="key">"mcpServers"</span>: <span class="brace">{</span>
    <span class="key">"synergyos"</span>: <span class="brace">{</span>
      <span class="key">"command"</span>: <span class="str">"npx"</span>,
      <span class="key">"args"</span>: [<span class="str">"-y"</span>, <span class="str">"synergyos-mcp"</span>],
      <span class="key">"env"</span>: <span class="brace">{</span>
        <span class="key">"CONVEX_SITE_URL"</span>: <span class="str">"https://your-deployment.convex.site"</span>,
        <span class="key">"MCP_API_KEY"</span>:      <span class="str">"your-secret-api-key"</span>,
        <span class="key">"WORKSPACE_SLUG"</span>:   <span class="str">"your-workspace-slug"</span>
      <span class="brace">}</span>
    <span class="brace">}</span>
  <span class="brace">}</span>
<span class="brace">}</span></pre>
    </div>

    <p style="color: var(--text-dim); font-size: .85rem; margin-top: 24px;">
      Then ask Cursor: <em>"Use the health tool to check Product OS connectivity"</em>
    </p>
  </div>
</section>

<!-- ── Security ────────────────────────────────────────────── -->

<section class="security fade-in" id="security">
  <div class="container">
    <span class="section-label">Trust &amp; Security</span>
    <h2 class="section-title">Built for teams that can't afford to get security wrong</h2>
    <p class="section-sub">SOC 2 Type II certified infrastructure. Your data encrypted, isolated, and audited &mdash; whether you self-host or use our cloud.</p>

    <div class="trust-badges">
      <div class="trust-badge">
        <span class="trust-badge-icon">&#128737;</span>
        <h4>SOC 2 Type II</h4>
        <p>Audited annually by independent security firm</p>
      </div>
      <div class="trust-badge">
        <span class="trust-badge-icon">&#128274;</span>
        <h4>Encrypted everywhere</h4>
        <p>AES-256 at rest, TLS 1.2+ in transit</p>
      </div>
      <div class="trust-badge">
        <span class="trust-badge-icon">&#127759;</span>
        <h4>Multi-AZ durability</h4>
        <p>11 9's backup durability, 4 9's availability</p>
      </div>
      <div class="trust-badge">
        <span class="trust-badge-icon">&#128269;</span>
        <h4>Pen-tested annually</h4>
        <p>Independent penetration testing every year</p>
      </div>
    </div>

    <div class="security-grid">
      <div class="security-item">
        <span class="security-icon">&#129302;</span>
        <h3>Your data never trains AI models</h3>
        <p>Product OS reads and writes your KB &mdash; it never sends your knowledge to model providers for training. The LLM interaction happens in your editor; the MCP server only serves structured data.</p>
      </div>
      <div class="security-item">
        <span class="security-icon">&#128194;</span>
        <h3>Workspace isolation</h3>
        <p>Every API call is scoped to your workspace ID. No cross-workspace queries are possible. Your team's knowledge graph is invisible to every other workspace.</p>
      </div>
      <div class="security-item">
        <span class="security-icon">&#128273;</span>
        <h3>Authenticated every request</h3>
        <p>Bearer token API key on every single call. Keys are never logged, never stored in code, never exposed in error messages.</p>
      </div>
      <div class="security-item">
        <span class="security-icon">&#128167;</span>
        <h3>Internal functions only</h3>
        <p>All database operations use Convex <code>internalQuery</code> / <code>internalMutation</code>, blocked from all external clients by the platform. Only the authenticated HTTP gateway can dispatch calls.</p>
      </div>
      <div class="security-item">
        <span class="security-icon">&#128220;</span>
        <h3>Full audit trail</h3>
        <p>Every read, write, and search is logged with timestamp, function, workspace, and duration. Entry-level change history tracks who changed what and when.</p>
      </div>
      <div class="security-item">
        <span class="security-icon">&#128683;</span>
        <h3>Zero telemetry by default</h3>
        <p>No analytics, no tracking, no phone-home. Set a PostHog key to opt in. Omit it to disable everything. You decide what gets measured.</p>
      </div>
    </div>

    <div class="security-callout">
      <p><strong>The ultimate security: run it yourself.</strong> Product OS is MIT-licensed, fully open source. Self-host on your own Convex deployment and your data never leaves your infrastructure. No third-party access. No trust required. Inspect every line of code that touches your knowledge.</p>
      <div class="security-callout-actions">
        <a href="#install" class="btn btn-ghost">Self-host now</a>
        <a href="https://github.com/synergyai-os/product-os-mcp" class="btn btn-ghost" target="_blank" rel="noopener">View source on GitHub</a>
      </div>
    </div>
  </div>
</section>

<!-- ── Pricing ──────────────────────────────────────────────── -->

<section class="pricing fade-in" id="pricing">
  <div class="container">
    <span class="section-label">Your investment</span>
    <h2 class="section-title">Free and open source. Or let us host it.</h2>
    <p class="section-sub">Self-host forever for free, or start on SynergyOS.ai Cloud in seconds.</p>

    <div class="pricing-grid">
      <div class="price-card open-source">
        <span class="price-badge">Open Source</span>
        <h3>Self-Hosted</h3>
        <p class="price-tagline">Your infrastructure, your rules</p>
        <div class="price-amount">Free</div>
        <p class="price-detail">Forever. MIT License.</p>
        <ul class="price-features">
          <li>Full MCP server — all 20+ tools</li>
          <li>All resources and prompts</li>
          <li>Unlimited entries and collections</li>
          <li>Your own Convex deployment</li>
          <li>Full source code access</li>
          <li>Community support via GitHub</li>
        </ul>
        <a href="#install" class="btn btn-ghost">Self-host now</a>
      </div>

      <div class="price-card cloud">
        <span class="price-badge">SynergyOS.ai Cloud</span>
        <h3>Hosted for you</h3>
        <p class="price-tagline">Start in seconds, we handle the infrastructure</p>
        <div class="price-amount"><span class="currency">&euro;</span>300<span class="period"> /month</span></div>
        <p class="price-detail">AI costs included &middot; Credits-based usage. Free 30-day trial, no credit card required.</p>
        <ul class="price-features">
          <li>Everything in Self-Hosted</li>
          <li>Managed Convex deployment</li>
          <li>AI credits included per month</li>
          <li>30-day free trial to start</li>
          <li>Onboarding and priority support</li>
          <li>Automatic backups and updates</li>
        </ul>
        <a href="https://synergyos.ai" class="btn btn-primary" target="_blank" rel="noopener">Start free trial</a>
        <p class="price-or">Or pay as you go &mdash; usage-based pricing available</p>
      </div>
    </div>
  </div>
</section>

<!-- ── CTA ──────────────────────────────────────────────────── -->

<section class="cta">
  <div class="container">
    <h2>Stop maintaining docs.<br>Start working <span style="background:linear-gradient(135deg,var(--accent-bright),#c084fc);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent">in synergy with AI</span>.</h2>
    <p>Product OS gives your team full business awareness — the coherent vision, strategy, and context they need to build great products.</p>
    <div class="cta-actions">
      <a href="https://synergyos.ai" class="btn btn-primary" target="_blank" rel="noopener">Start free trial on SynergyOS.ai</a>
      <a href="#install" class="btn btn-ghost">Self-host (free forever)</a>
      <a href="https://github.com/synergyai-os/product-os-mcp" class="btn btn-ghost" target="_blank" rel="noopener">View on GitHub</a>
    </div>
  </div>
</section>

<!-- ── Footer ──────────────────────────────────────────────── -->

<footer>
  <div class="container">
    <span>Product OS MCP &mdash; MIT License &middot; <a href="https://synergyos.ai" target="_blank" rel="noopener">SynergyOS.ai</a></span>
    <div style="display:flex;gap:20px;align-items:center">
      <a href="product-brain.html">Product Brain</a>
      <a href="https://github.com/synergyai-os/product-os-mcp" target="_blank" rel="noopener">GitHub</a>
      <a href="https://synergyos.ai" target="_blank" rel="noopener">Cloud</a>
    </div>
  </div>
  <div class="container" style="margin-top:20px;display:flex;align-items:center;justify-content:center;gap:8px;padding-bottom:8px">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C6.48 2 2 6.48 2 12c0 4.42 2.87 8.17 6.84 9.49.5.09.66-.22.66-.48v-1.7c-2.78.6-3.37-1.34-3.37-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.61.07-.61 1 .07 1.53 1.03 1.53 1.03.89 1.53 2.34 1.09 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.56-1.11-4.56-4.95 0-1.09.39-1.98 1.03-2.68-.1-.25-.45-1.27.1-2.64 0 0 .84-.27 2.75 1.02A9.56 9.56 0 0 1 12 6.8c.85 0 1.7.11 2.5.34 1.91-1.29 2.75-1.02 2.75-1.02.55 1.37.2 2.39.1 2.64.64.7 1.03 1.59 1.03 2.68 0 3.85-2.34 4.7-4.57 4.95.36.31.68.92.68 1.85v2.75c0 .27.16.58.67.48A10.01 10.01 0 0 0 22 12c0-5.52-4.48-10-10-10z"/></svg>
    <span style="font-size:.75rem;color:var(--text-dim)">Open source, always.</span>
  </div>
</footer>

<!-- ── Scroll animation ────────────────────────────────────── -->

<script>
  const observer = new IntersectionObserver(
    (entries) => {
      for (const entry of entries) {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
        }
      }
    },
    { threshold: 0.1, rootMargin: '0px 0px -40px 0px' }
  );
  document.querySelectorAll('.fade-in').forEach((el) => observer.observe(el));
</script>

<!-- ── Interactive Sandbox Engine ──────────────────────────── -->

<script>
(function() {
  'use strict';

  var SPEED = 18;
  var PAUSE_SHORT = 350;
  var PAUSE_MED = 700;
  var PAUSE_LONG = 1200;

  // Segment types: '' = normal, 'e' = error, 'g' = correct/green, 'r' = KB ref
  var SCENARIOS = [
    {
      prompt: 'Add supplier validation to the order form',
      keywords: ['supplier', 'vendor', 'validation', 'order form'],
      badges: [
        { id: 'BR-012', tip: 'Supplier field governance' },
        { id: 'GT-019', tip: 'supplier = external entity' },
        { id: 'DR-005', tip: 'Use suppliers table' },
        { id: 'BR-015', tip: 'Approved supplier list' }
      ],
      without: [
        { t: "I'll add validation for the ", c: '' },
        { t: 'vendor', c: 'e' },
        { t: ' field.\n\nUpdating the ', c: '' },
        { t: 'purchases', c: 'e' },
        { t: ' table schema:\n\n  ', c: '' },
        { t: 'vendorName', c: 'e' },
        { t: ': v.string(),\n  ', c: '' },
        { t: 'vendorEmail', c: 'e' },
        { t: ': v.string(),\n\nAdding validation in the\n', c: '' },
        { t: 'VendorForm', c: 'e' },
        { t: ' component...', c: '' }
      ],
      withResp: [
        { t: 'Based on ', c: '' },
        { t: 'BR-012', c: 'r' },
        { t: ' (supplier field governance)\nand ', c: '' },
        { t: 'GT-019', c: 'r' },
        { t: ' (supplier = external entity\nproviding goods):\n\n  ', c: '' },
        { t: 'supplierId', c: 'g' },
        { t: ': v.id("', c: '' },
        { t: 'suppliers', c: 'g' },
        { t: '"),\n  ', c: '' },
        { t: 'supplierEmail', c: 'g' },
        { t: ': v.string(),\n\nUpdating the ', c: '' },
        { t: 'SupplierForm', c: 'g' },
        { t: ' component\nwith validation against the approved\nsupplier list (', c: '' },
        { t: 'BR-015', c: 'r' },
        { t: ').', c: '' }
      ],
      scoreBad: { text: 'Wrong terminology, wrong table, contradicts BR-012', badge: '\u2717 3 attempts' },
      scoreGood: { text: 'Correct terms, correct table, rules satisfied', badge: '\u2713 First Time Good' }
    },
    {
      prompt: 'Create the purchase approval workflow',
      keywords: ['approval', 'purchase', 'workflow', 'approve'],
      badges: [
        { id: 'BR-021', tip: 'Approval tier thresholds' },
        { id: 'GT-024', tip: 'purchase_order lifecycle' },
        { id: 'DR-008', tip: 'Tiered approval decision' },
        { id: 'BR-019', tip: 'Audit trail requirement' }
      ],
      without: [
        { t: "I'll create an approval workflow.\n\nAdding to the ", c: '' },
        { t: 'orders', c: 'e' },
        { t: ' table:\n\n  status: v.string(),\n  ', c: '' },
        { t: 'approvedBy', c: 'e' },
        { t: ': v.string(),\n\nIf order total > ', c: '' },
        { t: '$5,000', c: 'e' },
        { t: ', require\n', c: '' },
        { t: 'manager', c: 'e' },
        { t: ' approval. Otherwise\nauto-approve and update status...', c: '' }
      ],
      withResp: [
        { t: 'Based on ', c: '' },
        { t: 'BR-021', c: 'r' },
        { t: ' (approval tier thresholds)\nand ', c: '' },
        { t: 'GT-024', c: 'r' },
        { t: ' (purchase_order lifecycle):\n\nApproval chain per tier:\n  < $5k \u2192 ', c: '' },
        { t: 'dept_lead', c: 'g' },
        { t: ' approves\n  < $25k \u2192 ', c: '' },
        { t: 'finance_director', c: 'g' },
        { t: ' approves\n  \u2265 $25k \u2192 ', c: '' },
        { t: 'CFO', c: 'g' },
        { t: ' approves\n\nUsing ', c: '' },
        { t: 'purchase_orders', c: 'g' },
        { t: ' table with\naudit trail per ', c: '' },
        { t: 'BR-019', c: 'r' },
        { t: '.', c: '' }
      ],
      scoreBad: { text: 'Missing approval tiers, wrong threshold, flat hierarchy', badge: '\u2717 3 attempts' },
      scoreGood: { text: 'Tiered approval chain, correct thresholds, audit-compliant', badge: '\u2713 First Time Good' }
    },
    {
      prompt: 'Add email notification when inventory is low',
      keywords: ['inventory', 'notification', 'email', 'stock', 'reorder'],
      badges: [
        { id: 'BR-031', tip: 'Reorder point formula' },
        { id: 'GT-028', tip: 'reorder_point definition' },
        { id: 'BR-033', tip: 'Role-based notification' },
        { id: 'DR-011', tip: 'Dynamic threshold decision' }
      ],
      without: [
        { t: "I'll add a stock check.\n\nChecking ", c: '' },
        { t: 'products', c: 'e' },
        { t: ' table:\n\n  if (', c: '' },
        { t: 'quantity', c: 'e' },
        { t: ' < ', c: '' },
        { t: '10', c: 'e' },
        { t: ') {\n    sendEmail("', c: '' },
        { t: 'admin@company.com', c: 'e' },
        { t: '",\n      "Low stock alert");\n  }\n\nThis runs on every inventory\nupdate...', c: '' }
      ],
      withResp: [
        { t: 'Based on ', c: '' },
        { t: 'BR-031', c: 'r' },
        { t: ' (reorder point formula)\nand ', c: '' },
        { t: 'GT-028', c: 'r' },
        { t: ' (reorder_point definition):\n\n  threshold = ', c: '' },
        { t: 'avg_daily_usage', c: 'g' },
        { t: '\n    \u00d7 ', c: '' },
        { t: 'lead_time_days', c: 'g' },
        { t: ' + ', c: '' },
        { t: 'safety_stock', c: 'g' },
        { t: '\n\nQuerying ', c: '' },
        { t: 'inventory_items', c: 'g' },
        { t: ' table.\nNotifying ', c: '' },
        { t: 'category_procurement_lead', c: 'g' },
        { t: '\nper ', c: '' },
        { t: 'BR-033', c: 'r' },
        { t: ' role-based routing.', c: '' }
      ],
      scoreBad: { text: 'Hardcoded threshold, wrong table, generic recipient', badge: '\u2717 3 attempts' },
      scoreGood: { text: 'Dynamic reorder point, correct table, role-based alert', badge: '\u2713 First Time Good' }
    },
    {
      prompt: 'Validate order totals against budget rules',
      keywords: ['budget', 'validate', 'total', 'spending', 'department'],
      badges: [
        { id: 'BR-041', tip: 'Quarterly budget governance' },
        { id: 'GT-035', tip: 'fiscal_period = rolling quarter' },
        { id: 'BR-044', tip: 'Exception audit requirements' },
        { id: 'DR-014', tip: 'Dual threshold decision' }
      ],
      without: [
        { t: "I'll add budget validation.\n\nChecking ", c: '' },
        { t: 'departments', c: 'e' },
        { t: ' table:\n\n  if (orderTotal > ', c: '' },
        { t: 'budget_limit', c: 'e' },
        { t: ') {\n    throw new Error(\n      "', c: '' },
        { t: 'Over budget', c: 'e' },
        { t: '");\n  }\n\nBlocking the order if the total\nexceeds the department limit...', c: '' }
      ],
      withResp: [
        { t: 'Based on ', c: '' },
        { t: 'BR-041', c: 'r' },
        { t: ' (quarterly budget governance)\nand ', c: '' },
        { t: 'GT-035', c: 'r' },
        { t: ' (fiscal_period = rolling quarter):\n\nUsing ', c: '' },
        { t: 'department_budgets', c: 'g' },
        { t: ' table:\n  \u2265 90% allocated \u2192 ', c: '' },
        { t: 'soft warning', c: 'g' },
        { t: '\n  \u2265 100% allocated \u2192 ', c: '' },
        { t: 'hard block', c: 'g' },
        { t: '\n\nAll exceptions logged per\n', c: '' },
        { t: 'BR-044', c: 'r' },
        { t: ' audit requirements.', c: '' }
      ],
      scoreBad: { text: 'Simple cap check, wrong budget model, no soft limits', badge: '\u2717 3 attempts' },
      scoreGood: { text: 'Quarterly governance, dual thresholds, audit-compliant', badge: '\u2713 First Time Good' }
    }
  ];

  var current = 0;
  var running = false;
  var rid = 0;

  var input = document.getElementById('sandbox-input');
  var runBtn = document.getElementById('sandbox-run');
  var chipsEl = document.getElementById('sandbox-chips');
  var nudge = document.getElementById('sandbox-nudge');
  var nudgeDismiss = document.getElementById('nudge-dismiss');
  var mobileTabs = document.getElementById('sandbox-mobile-tabs');
  var panelW = document.getElementById('panel-without');
  var panelR = document.getElementById('panel-with');
  var promptW = document.getElementById('demo-prompt-without');
  var promptR = document.getElementById('demo-prompt-with');
  var respW = document.getElementById('demo-response-without');
  var respR = document.getElementById('demo-response-with');
  var attemptW = document.getElementById('demo-attempt-without');
  var attemptR = document.getElementById('demo-attempt-with');
  var ctxBar = document.getElementById('demo-context-bar');
  var scorecard = document.getElementById('sandbox-scorecard');
  var sBadT = document.getElementById('scorecard-text-bad');
  var sBadB = document.getElementById('scorecard-badge-bad');
  var sGoodT = document.getElementById('scorecard-text-good');
  var sGoodB = document.getElementById('scorecard-badge-good');
  var replayBtn = document.getElementById('demo-replay');
  var ctaEl = document.getElementById('sandbox-cta');

  function wait(ms) { return new Promise(function(r) { setTimeout(r, ms); }); }

  function buildChips() {
    chipsEl.innerHTML = '';
    SCENARIOS.forEach(function(s, i) {
      var b = document.createElement('button');
      b.className = 'sandbox-chip' + (i === 0 ? ' active' : '');
      b.textContent = s.prompt;
      b.addEventListener('click', function() { selectScenario(i); });
      chipsEl.appendChild(b);
    });
  }

  function selectScenario(idx) {
    if (running) { rid++; running = false; }
    current = idx;
    input.value = SCENARIOS[idx].prompt;
    var chips = chipsEl.querySelectorAll('.sandbox-chip');
    chips.forEach(function(c, i) { c.classList.toggle('active', i === idx); });
    nudge.classList.remove('visible');
    setTimeout(function() { runScenario(idx); }, 50);
  }

  function matchInput(text) {
    var low = text.toLowerCase();
    var best = -1, bestN = 0;
    SCENARIOS.forEach(function(s, i) {
      var n = 0;
      s.keywords.forEach(function(k) { if (low.indexOf(k) !== -1) n++; });
      if (n > bestN) { bestN = n; best = i; }
    });
    return best;
  }

  function handleRun() {
    if (running) return;
    var text = input.value.trim();
    if (!text) return;
    var idx = matchInput(text);
    if (idx >= 0) {
      current = idx;
      var chips = chipsEl.querySelectorAll('.sandbox-chip');
      chips.forEach(function(c, i) { c.classList.toggle('active', i === idx); });
      nudge.classList.remove('visible');
      runScenario(idx);
    } else {
      nudge.classList.add('visible');
      var chips = chipsEl.querySelectorAll('.sandbox-chip');
      chips.forEach(function(c) {
        c.style.borderColor = 'var(--orange)';
        setTimeout(function() { c.style.borderColor = ''; }, 1500);
      });
    }
  }

  function typeSegs(el, segs, speed, id) {
    return new Promise(function(resolve) {
      el.innerHTML = '';
      var cursor = document.createElement('span');
      cursor.className = 'demo-cursor';
      var si = 0, ci = 0, span = null;

      function tick() {
        if (rid !== id) return resolve();
        if (si >= segs.length) { if (cursor.parentNode) cursor.remove(); return resolve(); }
        var seg = segs[si];
        if (!span) {
          span = document.createElement('span');
          if (seg.c === 'e') span.className = 'demo-error';
          else if (seg.c === 'g') span.className = 'demo-correct';
          else if (seg.c === 'r') span.className = 'demo-kb-ref';
          el.appendChild(span);
          ci = 0;
        }
        span.textContent += seg.t[ci];
        if (cursor.parentNode) cursor.remove();
        el.appendChild(cursor);
        ci++;
        if (ci >= seg.t.length) { span = null; si++; }
        setTimeout(tick, speed + Math.random() * speed * 0.5);
      }

      tick();
    });
  }

  function resetDemo() {
    respW.innerHTML = '';
    respR.innerHTML = '';
    attemptW.textContent = '';
    attemptR.textContent = '';
    ctxBar.innerHTML = '';
    scorecard.classList.remove('visible');
    sBadT.textContent = '';
    sBadB.textContent = '';
    sGoodT.textContent = '';
    sGoodB.textContent = '';
    replayBtn.classList.remove('visible');
    ctaEl.classList.remove('visible');
  }

  async function runScenario(idx) {
    if (running) return;
    running = true;
    var id = ++rid;
    var s = SCENARIOS[idx];

    resetDemo();
    promptW.textContent = '\u201C' + s.prompt + '\u201D';
    promptR.textContent = '\u201C' + s.prompt + '\u201D';

    attemptW.textContent = 'Run 1';
    await wait(PAUSE_SHORT);
    if (rid !== id) { running = false; return; }

    await typeSegs(respW, s.without, SPEED, id);
    if (rid !== id) { running = false; return; }

    await wait(PAUSE_MED);
    attemptW.textContent = 'Run 3';

    await wait(PAUSE_LONG);
    if (rid !== id) { running = false; return; }

    attemptR.textContent = 'Run 1';
    ctxBar.innerHTML = '';
    for (var i = 0; i < s.badges.length; i++) {
      if (rid !== id) { running = false; return; }
      var badge = document.createElement('span');
      badge.className = 'demo-kb-badge';
      badge.innerHTML = s.badges[i].id + ' <span class="badge-check">&#10003;</span>';
      badge.title = s.badges[i].tip;
      ctxBar.appendChild(badge);
      (function(b) {
        setTimeout(function() { b.classList.add('visible'); }, 50);
        setTimeout(function() { b.classList.add('loaded'); }, 250);
      })(badge);
      await wait(200);
    }

    await wait(PAUSE_SHORT);
    if (rid !== id) { running = false; return; }

    await typeSegs(respR, s.withResp, SPEED, id);
    if (rid !== id) { running = false; return; }

    await wait(PAUSE_MED);
    sBadT.textContent = s.scoreBad.text;
    sBadB.textContent = s.scoreBad.badge;
    sGoodT.textContent = s.scoreGood.text;
    sGoodB.textContent = s.scoreGood.badge;
    scorecard.classList.add('visible');

    await wait(PAUSE_LONG);
    ctaEl.classList.add('visible');
    replayBtn.classList.add('visible');

    running = false;
  }

  function setupMobile() {
    if (!mobileTabs) return;
    var tabs = mobileTabs.querySelectorAll('.sandbox-tab');
    tabs.forEach(function(tab) {
      tab.addEventListener('click', function() {
        var p = this.getAttribute('data-panel');
        tabs.forEach(function(t) { t.classList.remove('active'); });
        this.classList.add('active');
        panelW.classList.toggle('mobile-active', p === 'without');
        panelR.classList.toggle('mobile-active', p === 'with');
      });
    });
  }

  buildChips();
  setupMobile();

  promptW.textContent = '\u201C' + SCENARIOS[0].prompt + '\u201D';
  promptR.textContent = '\u201C' + SCENARIOS[0].prompt + '\u201D';
  input.value = SCENARIOS[0].prompt;

  runBtn.addEventListener('click', handleRun);
  input.addEventListener('keydown', function(e) { if (e.key === 'Enter') handleRun(); });
  if (nudgeDismiss) {
    nudgeDismiss.addEventListener('click', function() {
      nudge.classList.remove('visible');
      chipsEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
    });
  }
  replayBtn.addEventListener('click', function() { runScenario(current); });

  var demoEl = document.getElementById('context-demo');
  var played = false;
  var demoObs = new IntersectionObserver(function(entries) {
    for (var i = 0; i < entries.length; i++) {
      if (entries[i].isIntersecting && !played) {
        played = true;
        setTimeout(function() { runScenario(0); }, 400);
      }
    }
  }, { threshold: 0.2 });
  if (demoEl) demoObs.observe(demoEl);
})();
</script>

<!-- ── Architecture Flow Animation ─────────────────────── -->

<script>
(function() {
  'use strict';

  var PROMPT = '\u201CAdd supplier validation to the order form\u201D';
  var TYPE_MS = 25;
  var running = false;
  var rid = 0;

  function wait(ms) { return new Promise(function(r) { setTimeout(r, ms); }); }

  function typeInto(el, text, speed, id) {
    return new Promise(function(resolve) {
      el.innerHTML = '';
      var cursor = document.createElement('span');
      cursor.className = 'flow-typing-cursor';
      var i = 0;

      function next() {
        if (rid !== id || i >= text.length) {
          if (cursor.parentNode) cursor.remove();
          return resolve();
        }
        el.textContent += text[i];
        if (cursor.parentNode) cursor.remove();
        el.appendChild(cursor);
        i++;
        setTimeout(next, speed + Math.random() * speed * 0.4);
      }

      next();
    });
  }

  function reset() {
    for (var i = 0; i < 4; i++) {
      var s = document.getElementById('fs' + i);
      if (s) s.className = 'flow-step';
    }
    for (var j = 0; j < 4; j++) {
      var c = document.getElementById('fc' + j);
      if (c) c.className = 'flow-connector';
    }
    var acts = document.querySelectorAll('.flow-act');
    for (var k = 0; k < acts.length; k++) acts[k].className = 'flow-act';
    var t = document.getElementById('fa0a-text');
    if (t) t.textContent = '';
    var r = document.getElementById('flow-resp');
    if (r) r.className = 'flow-response';
    var b = document.getElementById('flow-replay-btn');
    if (b) b.className = 'flow-replay-btn';
  }

  function showAct(id) { var el = document.getElementById(id); if (el) el.classList.add('show'); }

  async function play() {
    if (running) return;
    running = true;
    var id = ++rid;
    reset();

    await wait(200);
    for (var i = 0; i < 4; i++) document.getElementById('fs' + i).classList.add('ready');
    await wait(300);
    if (rid !== id) { running = false; return; }

    var s0 = document.getElementById('fs0');
    s0.classList.remove('ready'); s0.classList.add('active');
    await wait(300);
    showAct('fa0a');
    await typeInto(document.getElementById('fa0a-text'), PROMPT, TYPE_MS, id);
    if (rid !== id) { running = false; return; }
    await wait(500);
    s0.classList.remove('active'); s0.classList.add('done');

    document.getElementById('fc0').classList.add('lit');
    await wait(600);
    if (rid !== id) { running = false; return; }

    var s1 = document.getElementById('fs1');
    s1.classList.remove('ready'); s1.classList.add('active');
    await wait(350);
    showAct('fa1a');
    await wait(500);
    showAct('fa1b');
    await wait(600);
    if (rid !== id) { running = false; return; }
    s1.classList.remove('active'); s1.classList.add('done');

    document.getElementById('fc1').classList.add('lit');
    await wait(600);
    if (rid !== id) { running = false; return; }

    var s2 = document.getElementById('fs2');
    s2.classList.remove('ready'); s2.classList.add('active');
    await wait(350);
    showAct('fa2a');
    await wait(450);
    showAct('fa2b');
    await wait(600);
    if (rid !== id) { running = false; return; }
    s2.classList.remove('active'); s2.classList.add('done');

    document.getElementById('fc2').classList.add('lit');
    await wait(600);
    if (rid !== id) { running = false; return; }

    var s3 = document.getElementById('fs3');
    s3.classList.remove('ready'); s3.classList.add('active');
    await wait(350);
    showAct('fa3a'); await wait(280);
    showAct('fa3b'); await wait(280);
    showAct('fa3c'); await wait(280);
    showAct('fa3d'); await wait(700);
    if (rid !== id) { running = false; return; }
    s3.classList.remove('active'); s3.classList.add('done');

    document.getElementById('fc3').classList.add('lit');
    await wait(500);
    document.getElementById('flow-resp').classList.add('show');
    await wait(1000);
    document.getElementById('flow-replay-btn').classList.add('show');

    running = false;
  }

  var el = document.getElementById('flow-demo');
  var played = false;
  var obs = new IntersectionObserver(function(entries) {
    for (var i = 0; i < entries.length; i++) {
      if (entries[i].isIntersecting && !played) {
        played = true;
        setTimeout(play, 400);
      }
    }
  }, { threshold: 0.25 });
  if (el) obs.observe(el);

  var btn = document.getElementById('flow-replay-btn');
  if (btn) btn.addEventListener('click', function() { played = true; play(); });
})();
</script>

</body>
</html>
